---
description: Ultimate Fix for "Internal Server Error" & "ENOENT" Loops
---

# ðŸ›‘ STOP - READ FIRST
Use this workflow immediately if you see:
- `Error: ENOENT: no such file or directory` (especially routes-manifest.json)
- `Internal Server Error` that persists after refresh
- `EADDRINUSE: address already in use`

This workflow performs a "Nuclear Clean" of the development environment.

# 1. Kill Zombie Processes
// turbo-all
The most common cause of `ENOENT` is a phantom `next-server` process holding file locks while a new process tries to write.
**NOTE:** We specificially target `next-server` and port 3000 to avoid killing the Antigravity agent.
```bash
# Force kill anything on port 3000
lsof -t -i:3000 | xargs kill -9 || true

# Kill next-server processes (specific to Next.js)
pkill -f next-server || true
```

# 2. Deep Clean Artifacts
// turbo-all
Remove all generated files that might be corrupted or desynchronized.
```bash
# Remove Next.js build folder
rm -rf .next

# Remove Webpack cache (often the culprit for sticky errors)
rm -rf node_modules/.cache

# Remove System Temp files (optional but recommended on Mac)
rm -rf /var/folders/*/*/*/com.apple.LaunchServices* || true
```

# 3. Environment Check
// turbo-all
Verify that no other services are interfering.
```bash
# Check if port is truly free
lsof -i:3000
```

# 4. Rebuild & Start
// turbo-all
Start the server in a clean state. We use `--no-webpack-cache` (implicit with clean) logic.
**IMPORTANT:** Always run with HTTPS to match production parity and avoid mixed content issues.
```bash
# Re-generate Prisma Client (just in case)
npx prisma generate

# Start Server (HTTPS)
npm run dev:https
```

# ðŸ’¡ Prevention Tips
- **Never** run `npm run dev` in two terminals.
- **Avoid** `rm -rf .next` while the server is running.
- If errors persist, check `next.config.ts` and ensure `config.cache` is NOT set to `false`.
